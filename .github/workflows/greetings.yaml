name: Auto Comment
on:
  issues:
    types:
      - opened
      - assigned

jobs:
  run:
    runs-on: ubuntu-latest
    steps:
      - name: Auto Comment on Issues Opened
        if: github.event_name == 'issues' && github.event.action == 'opened'
        run: |
          MESSAGE="üëã @$GITHUB_ACTOR\n\nThank you for raising an issue. We will investigate into the matter and get back to you as soon as possible.\n\nPlease make sure you have given us as much context as possible."
          ISSUE_NUMBER=$(jq --raw-output .issue.number "$GITHUB_EVENT_PATH")
          curl -X POST \
            -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
            -H "Accept: application/vnd.github.v3+json" \
            -d "{\"body\":\"$MESSAGE\"}" \
            "https://api.github.com/repos/${GITHUB_REPOSITORY}/issues/${ISSUE_NUMBER}/comments"

      - name: Auto Comment on Issues Assigned
        if: github.event_name == 'issues' && github.event.action == 'assigned'
        run: |
          MESSAGE="Hello @$GITHUB_ACTOR, thank you for raising an issue. üôå I have assigned the issue to you. You can now start working on it. If you encounter any problems, please feel free to connect with us. üëç"
          ISSUE_NUMBER=$(jq --raw-output .issue.number "$GITHUB_EVENT_PATH")
          curl -X POST \
            -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
            -H "Accept: application/vnd.github.v3+json" \
            -d "{\"body\":\"$MESSAGE\"}" \
            "https://api.github.com/repos/${GITHUB_REPOSITORY}/issues/${ISSUE_NUMBER}/comments"
